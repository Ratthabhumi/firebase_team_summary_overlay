<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Admin Panel - Rugby Team Summary</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #121212;
      color: #fff;
      padding: 30px;
    }
    h1 {
      text-align: center;
      margin-bottom: 30px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      background: #1e1e1e;
      border-radius: 10px;
      overflow: hidden;
    }
    th, td {
      padding: 10px;
      text-align: center;
      border-bottom: 1px solid #333;
    }
    th {
      background: #2c2c2c;
    }
    .btn {
      padding: 6px 12px;
      margin: 0 3px;
      font-size: 16px;
      cursor: pointer;
      border: none;
      border-radius: 4px;
      background: #444;
      color: white;
    }
    .btn:hover {
      background: #666;
    }
    .btn-save {
      margin-top: 20px;
      background: #007bff;
    }
    .btn-save:hover {
      background: #3399ff;
    }
  </style>
</head>
<body>

<h1>üõ† Rugby Match Admin</h1>

<table>
  <thead>
    <tr>
      <th>Stat</th>
      <th>Team A</th>
      <th>Controls</th>
      <th>Team B</th>
      <th>Controls</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Tries</td>
      <td id="a-tries">0</td>
      <td>
        <button class="btn" onclick="adjust('a', 'tries', 1)">+</button>
        <button class="btn" onclick="adjust('a', 'tries', -1)">-</button>
      </td>
      <td id="b-tries">0</td>
      <td>
        <button class="btn" onclick="adjust('b', 'tries', 1)">+</button>
        <button class="btn" onclick="adjust('b', 'tries', -1)">-</button>
      </td>
    </tr>
    <tr>
      <td>Conversions</td>
      <td id="a-conv">0</td>
      <td>
        <button class="btn" onclick="adjust('a', 'conv', 1)">+</button>
        <button class="btn" onclick="adjust('a', 'conv', -1)">-</button>
      </td>
      <td id="b-conv">0</td>
      <td>
        <button class="btn" onclick="adjust('b', 'conv', 1)">+</button>
        <button class="btn" onclick="adjust('b', 'conv', -1)">-</button>
      </td>
    </tr>
    <tr>
      <td>Penalty Goals</td>
      <td id="a-pen">0</td>
      <td>
        <button class="btn" onclick="adjust('a', 'pen', 1)">+</button>
        <button class="btn" onclick="adjust('a', 'pen', -1)">-</button>
      </td>
      <td id="b-pen">0</td>
      <td>
        <button class="btn" onclick="adjust('b', 'pen', 1)">+</button>
        <button class="btn" onclick="adjust('b', 'pen', -1)">-</button>
      </td>
    </tr>
    <tr>
      <td>Drop Goals</td>
      <td id="a-drop">0</td>
      <td>
        <button class="btn" onclick="adjust('a', 'drop', 1)">+</button>
        <button class="btn" onclick="adjust('a', 'drop', -1)">-</button>
      </td>
      <td id="b-drop">0</td>
      <td>
        <button class="btn" onclick="adjust('b', 'drop', 1)">+</button>
        <button class="btn" onclick="adjust('b', 'drop', -1)">-</button>
      </td>
    </tr>
    <tr>
      <td>Possession %</td>
      <td id="a-possession">50</td>
      <td>
        <button class="btn" onclick="adjust('a', 'possession', 1)">+</button>
        <button class="btn" onclick="adjust('a', 'possession', -1)">-</button>
      </td>
      <td id="b-possession">50</td>
      <td>
        <button class="btn" onclick="adjust('b', 'possession', 1)">+</button>
        <button class="btn" onclick="adjust('b', 'possession', -1)">-</button>
      </td>
    </tr>
    <tr>
      <td>Territory (km)</td>
      <td id="a-territory">0.0</td>
      <td>
        <button class="btn" onclick="adjust('a', 'territory', 0.1)">+</button>
        <button class="btn" onclick="adjust('a', 'territory', -0.1)">-</button>
      </td>
      <td id="b-territory">0.0</td>
      <td>
        <button class="btn" onclick="adjust('b', 'territory', 0.1)">+</button>
        <button class="btn" onclick="adjust('b', 'territory', -0.1)">-</button>
      </td>
    </tr>
  </tbody>
</table>

<center>
  <button class="btn btn-save" onclick="saveToFirebase()">üíæ Save to Firebase</button>
</center>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
  import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAxU5xfTf8wRTnkmTHP7pR3Aon7IISRvyY",
    authDomain: "rugby-c8da2.firebaseapp.com",
    databaseURL: "https://rugby-c8da2-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "rugby-c8da2",
    storageBucket: "rugby-c8da2.firebasestorage.app",
    messagingSenderId: "812436187599",
    appId: "1:812436187599:web:4dd147d1b35c2122c08aba",
    measurementId: "G-07W3W2VZND"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);
  const summaryRef = ref(db, 'summary');

  const stats = ['tries', 'conv', 'pen', 'drop', 'possession', 'territory'];

  // ‚úÖ FIX: ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å HTML
  window.adjust = function(team, stat, diff) {
    const id = `${team}-${stat}`;
    let current = parseFloat(document.getElementById(id).textContent);
    current += diff;
    if (stat !== 'territory') current = Math.round(current);
    if (current < 0) current = 0;
    if (stat === 'possession' && current > 100) current = 100;
    document.getElementById(id).textContent = current.toFixed(stat === 'territory' ? 1 : 0);
  }

  window.saveToFirebase = function() {
    const data = { a: {}, b: {} };
    ['a', 'b'].forEach(team => {
      stats.forEach(stat => {
        const id = `${team}-${stat}`;
        let value = parseFloat(document.getElementById(id).textContent);
        data[team][stat] = stat === 'territory' ? parseFloat(value.toFixed(1)) : Math.round(value);
      });
    });
    set(summaryRef, data)
      .then(() => alert('‚úÖ Data saved to Firebase!'))
      .catch(err => alert('‚ùå Error: ' + err.message));
  }
</script>

</body>
</html>
